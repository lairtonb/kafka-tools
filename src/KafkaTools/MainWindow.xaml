<Window x:Class="KafkaTools.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        
        xmlns:local="clr-namespace:KafkaTools"
        xmlns:notifications="clr-namespace:Notifications.Wpf.Core.Controls;assembly=Notifications.Wpf.Core"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        
        ResizeMode="CanResizeWithGrip"
        Title="Kafka Tools" 
        Height="600" 
        Width="1100" 
        Closed="Window_Closed"
>
    <Window.DataContext>
        <local:MainWindow />
    </Window.DataContext>
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="DataGridStyles.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <local:TimestampConverter x:Key="TimestampConverter" />
        </ResourceDictionary>                
    </Window.Resources>    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="25"></RowDefinition>
        </Grid.RowDefinitions>

        <notifications:NotificationArea x:Name="WindowArea" 
            Position="TopRight" 
            MaxItems="3"
            Panel.ZIndex="999"  Grid.Row="0" Grid.RowSpan="2" />

        <TabControl Grid.Row="0">
            <TabItem Header="View Messages" IsSelected="True">
                <Grid>
                    <Grid Background="#FFE5E5E5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition MinWidth="380"/>
                            <ColumnDefinition Width="5"/>
                            <ColumnDefinition Width="*" MinWidth="380"/>
                            <ColumnDefinition Width="5"/>
                            <ColumnDefinition Width="*" MinWidth="250"/>
                        </Grid.ColumnDefinitions>
                        <Grid Column="0">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="28"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <DockPanel Grid.Row="0">
                                <Label DockPanel.Dock="Top" 
                                       Background="LightSlateGray" 
                                       Foreground="White" 
                                       FontWeight="Medium">
                                    Environment
                                </Label>
                            </DockPanel>
                            <Grid Grid.Row="1" Background="#EEE">
                                <Label Content="Environment" HorizontalAlignment="Left" Margin="11,10,0,0" VerticalAlignment="Top" Padding="0,5,5,5"/>
                                <ComboBox Name="environmentsComboBox"                              
                                    ItemsSource="{Binding Path=Environments}" 
                                    SelectedItem="{Binding Path=SelectedEnvironment, ValidatesOnDataErrors=True}"
                                    HorizontalAlignment="Left" 
                                    Margin="11,36,0,0" 
                                    VerticalAlignment="Top" Width="130" SelectionChanged="EnvironmentsComboBox_SelectionChanged" />
                                <Button Name="manageEnvironmentsButton" Content="Manage ..." 
                                    d:Visibility="Visible" Visibility="Hidden" 
                                    HorizontalAlignment="Stretch" 
                                    Margin="150,37,10,0" 
                                    VerticalAlignment="Top"  />
                                <Label Content="Topics" HorizontalAlignment="Left" 
                                    Margin="10,63,10,0" VerticalAlignment="Top" Width="48" 
                                    Padding="0,5,5,5"/>
                                <TextBox Name="filterTopicTextBox" Margin="10,89,10,0"                              
                                    TextWrapping="Wrap" VerticalAlignment="Top"/>
                                <ListBox x:Name="TopicsListBox"
                                    ItemsSource="{Binding Topics}" 
                                    SelectedItem="{Binding SelectedTopic}"  
                                    d:ItemsSource="{d:SampleData ItemCount=5}" 
                                    DisplayMemberPath="TopicName"
                                    Margin="10,112,10,10" SelectionChanged="TopicsListBox_SelectionChanged" />
                            </Grid>
                        </Grid>
                        <GridSplitter Grid.Column="1" Background="#FFF" Width="5" HorizontalAlignment="Stretch"/>
                        <Grid Column="2">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="28"/>
                                <RowDefinition Height="28"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <DockPanel Grid.Row="0">
                                <Label DockPanel.Dock="Top" 
                                       Background="LightSlateGray" 
                                       Foreground="White" 
                                       FontWeight="Medium">
                                    Messages
                                </Label>
                            </DockPanel>
                            <Grid Grid.Row="1" Background="#FFF9F9F9">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Button 
                                    Grid.Column="0"
                                    Name="subscribeToTopic" 
                                    Content="Subscribe" 
                                    HorizontalAlignment="Left" 
                                    VerticalAlignment="Center" 
                                    Width="75" 
                                    Margin="10,0,0,0" Click="SubscribeToTopic_Click"
                                />
                                <Label 
                                    Grid.Column="1"
                                    Content="{Binding SelectedTopic}" 
                                    HorizontalAlignment="Left" 
                                    Margin="10,0,10,0" 
                                    MinWidth="100"
                                    VerticalAlignment="Center" 
                                    Padding="0,5,5,5"/>
                            </Grid>
                            <Grid Grid.Row="2" Background="#FFF9F9F9">
                                <DataGrid  
                                    Name="dataGridMessages" AutoGenerateColumns="False" 
                                    SelectionChanged="DataGridMessages_SelectionChanged"
                                    ItemsSource="{Binding Path=SelectedTopic.Messages}"
                                    SelectedItem="{Binding SelectedMessage}"
                                    Style="{StaticResource {x:Type DataGrid}}"
                                    Margin="10,0,10,10">

                                    <DataGrid.Columns>
                                        <DataGridTextColumn Header="Key" Binding="{Binding Key}" Width="Auto" />
                                        <DataGridTextColumn Header="Timestamp" Binding="{Binding Timestamp, Converter={StaticResource TimestampConverter}}" Width="Auto" />
                                    </DataGrid.Columns>
                                    <d:DataGrid.ItemsSource>
                                        <x:Array Type="{x:Type local:JsonMessage}">
                                            <!-- Design-time data items -->
                                            <local:JsonMessage Key="07bc538c-b0f2-41b3-b049-01ba724d31c3" Value="5/30/2023 8:15:51 PM" />
                                            <local:JsonMessage Key="07bc538c-b0f2-41b3-b049-01ba724d31c3" Value="3" />
                                            <local:JsonMessage Key="07bc538c-b0f2-41b3-b049-01ba724d31c3" Value="3" />
                                            <local:JsonMessage Key="07bc538c-b0f2-41b3-b049-01ba724d31c3" Value="3" />
                                            <local:JsonMessage Key="07bc538c-b0f2-41b3-b049-01ba724d31c3" Value="3" />
                                            <local:JsonMessage Key="07bc538c-b0f2-41b3-b049-01ba724d31c3" Value="3" />
                                            <local:JsonMessage Key="07bc538c-b0f2-41b3-b049-01ba724d31c3" Value="3" />
                                            <!-- Add more items as needed -->
                                        </x:Array>
                                    </d:DataGrid.ItemsSource>
                                </DataGrid>
                            </Grid>
                        </Grid>
                        <GridSplitter Grid.Column="3" Background="#FFF" Width="5" HorizontalAlignment="Stretch"/>
                        <Grid Column="4">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="28"/>
                                <RowDefinition Height="28"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <DockPanel Grid.Row="0">
                                <Label DockPanel.Dock="Top" Background="LightSlateGray" Foreground="White" FontWeight="Medium">
                                    Selected Message
                                </Label>
                            </DockPanel>
                            <StackPanel Grid.Row="1" Orientation="Horizontal" FlowDirection="RightToLeft">
                                <Button Width="21" Height="21" BorderBrush="LightGray" Margin="10 0 0 0">
                                    <Viewbox Width="16" Height="16" VerticalAlignment="Center">
                                        <Canvas Width="16" Height="16">
                                            <Path Data="M12,2 L6,2 C4.9,2 4,2.9 4,4 L4,14 C4,15.1 4.9,16 6,16 L14,16 C15.1,16 16,15.1 16,14 L16,6 C16,4.9 15.1,4 14,4 L12,4 L12,2 Z M12,4 L10,4 L10,6 L12,6 L12,4 Z M12,10 L10,10 L10,12 L6,12 L6,10 L4,10 L4,4 L6,4 L6,8 L10,8 L10,4 L12,4 Z" Stroke="Black" StrokeThickness="1" StrokeLineJoin="Round"/>
                                        </Canvas>
                                    </Viewbox>
                                </Button>
                                <Button 
                                    Grid.Column="0"
                                    Name="PublishTo" 
                                    Content="Publish To ..." 
                                    VerticalAlignment="Center" 
                                    d:Visibility="Hidden"
                                    Width="100" 
                                    Margin="10,0,0,0" Click="PublishTo_Click"
                                />                                
                            </StackPanel>
                            <Grid Grid.Row="2" Background="#FFF9F9F9">
                                <TextBox 
                                    Name="textBoxMessage"
                                    TextWrapping="Wrap"
                                    Text="{Binding 
                                        SelectedMessageText, 
                                        Mode=TwoWay, 
                                        UpdateSourceTrigger=PropertyChanged}"
                                    FontFamily="Consolas"
                                    Margin="10,0,10,10"/>
                            </Grid>
                        </Grid>
                    </Grid>
                </Grid>
            </TabItem>            
        </TabControl>
        <StatusBar Grid.Row="1">
            <StatusBarItem>
                <TextBlock Name="lblStatus" />
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>

    
    